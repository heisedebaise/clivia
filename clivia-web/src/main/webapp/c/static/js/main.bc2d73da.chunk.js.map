{"version":3,"sources":["http.js","console/category.jsx","console/user.jsx","console/grid.jsx","console/dselect.jsx","json.js","console/dashboard.jsx","console/image.jsx","console/file.jsx","console/upload.jsx","console/editor.jsx","console/form.jsx","console/setting.jsx","console/crosier.jsx","page/index.jsx","console/body.jsx","console/menu.jsx","console/sign.jsx","console/index.jsx","sign-in/index.jsx","main/index.jsx","serviceWorker.js","index.js","console/meta.js","console/numeric.js"],"names":["service","uri","body","post","then","json","code","message","success","data","warn","fetch","method","headers","header","JSON","stringify","response","loader","setState","loading","localStorage","removeItem","ok","status","statusText","upload","name","file","psid","FormData","append","url","getItem","length","Math","random","toString","substring","setItem","Category","props","format","target","source","category","element","title","value","id","children","push","change","form","render","treeData","state","list","treeDefaultExpandedKeys","onChange","key","pointTo","React","Component","User","uids","className","avatar","map","uid","line","src","auth","i","type","RangePicker","Grid","model","m","split","n","multiple","values","labels","label","dselect","prop","style","eval","condition","e","button","op","onClick","operate","bind","action","reload","search","searches","input","document","createElement","display","onchange","files","reader","FileReader","onload","result","fileName","contentType","base64","indexOf","removeChild","load","current","pageNum","readAsDataURL","appendChild","click","page","parameter","window","location","href","ids","parent","preview","currentTarget","cancel","switch","check","param","pagination","Array","number","count","size","total","pageSize","meta","info","searchProps","getFieldsValue","column","elements","dangerouslySetInnerHTML","__html","toolbar","columns","dataSource","rowKey","visible","footer","onCancel","width","alt","createRef","Search","grid","hidden","toMoney","empty","toPercent","imgs","img","toArray","rel","s","defaultChecked","disabled","options","vname","lname","d","option","dataIndex","ops","mops","when","items","Item","overlay","cols","initialValues","item","span","htmlType","ref","onFinish","finish","gutter","index","Group","keys","Object","compact","noStyle","initValue","console","log","DSelect","componentDidMount","focus","filter","toLowerCase","showSearch","onFocus","onSearch","filterOption","text","array","parse","Dashboard","cards","card","statistic","timeout","setTimeout","componentWillUnmount","clearTimeout","j","get","mt","lastIndexOf","Image","changed","remove","uploader","path","thumbnail","readonly","uris","u","listType","fileList","customRequest","onPreview","onRemove","LoadingOutlined","PlusOutlined","File","PaperClipOutlined","progress","strokeColor","strokeWidth","percent","parseFloat","toFixed","UploadOutlined","f","Wysiwyg","editor","EditorState","createEmpty","draftToHtml","convertToRaw","getCurrentContent","content","htmlToDraft","createWithContent","ContentState","createFromBlockArray","editorState","localization","locale","onEditorStateChange","layout","labelCol","xs","sm","wrapperCol","Base","agreement","setFieldsValue","toInt","k","moment","fromMoney","fromPercent","join","submit","itemIndex","is","child","c","fix","move","VerticalAlignTopOutlined","ArrowUpOutlined","ArrowDownOutlined","VerticalAlignBottomOutlined","DeleteOutlined","plus","startsWith","icon","SyncOutlined","refresh","valuePropName","obj","from","to","moveCopy","mode","allowClear","showTime","permit","TextArea","autoSize","minRows","Password","buttons","one","Normal","undefined","ks","arr","Setting","kvs","replace","Crosier","grade","show","pathes","checked","save","expands","grades","menu","checkable","selectable","showIcon","checkStrictly","defaultExpandedKeys","defaultCheckedKeys","onCheck","nodes","Option","defaultValue","menus","parentKey","all","Page","setIndex","SubMenu","LeftMenu","theme","defaultOpenKeys","defaultSelectedKeys","Sign","sign","password","signOut","nick","user","UserOutlined","LockOutlined","Divider","LogoutOutlined","spinning","Console","minHeight","Sider","logo","Date","getFullYear","Header","Content","SignIn","up","repeat","this","prefix","color","placeholder","autoFocus","optionType","buttonStyle","signUpEnable","WechatOutlined","AlipayOutlined","WeiboOutlined","GithubOutlined","Footer","Main","zhCN","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","Promise","resolve","reject","full","sub","ps","fn","parseInt","round","trim"],"mappings":"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","file":"static/js/main.bc2d73da.chunk.js","sourcesContent":["import {\n    message\n} from 'antd';\n\nconst root = '';\n\nconst service = (uri, body) => post(uri, body).then(json => {\n    if (json === null) return null;\n\n    if (json.code === 0) {\n        if (json.message)\n            message.success(json.message);\n\n        return json.data;\n    }\n\n    message.warn('[' + json.code + ']' + json.message);\n\n    return null;\n});\n\nconst post = (uri, body) => fetch(root + uri, {\n    method: 'POST',\n    headers: header(),\n    body: JSON.stringify(body)\n}).then(response => {\n    if (post.loader) {\n        post.loader.setState({\n            loading: false\n        });\n    }\n\n    if (uri === '/user/sign-out')\n        localStorage.removeItem('photon-session-id');\n\n    if (response.ok) return response.json();\n\n    message.warn('[' + response.status + ']' + response.statusText);\n\n    return null;\n});\n\nconst upload = (name, file) => {\n    let header = {};\n    psid(header, true);\n    let body = new FormData();\n    body.append(name, file);\n\n    return fetch(root + '/photon/ctrl-http/upload', {\n        method: 'POST',\n        headers: header,\n        body: body\n    }).then(response => {\n        if (post.loader) {\n            post.loader.setState({\n                loading: false\n            });\n        }\n\n        if (response.ok) {\n            return response.json().then(json => {\n                if (json.success)\n                    return json;\n\n                message.warn(json.message);\n\n                return null;\n            });\n        }\n\n        message.warn('[' + response.status + ']' + response.statusText);\n\n        return null;\n    });\n}\n\nconst header = () => {\n    let header = {\n        'Content-Type': 'application/json'\n    };\n    psid(header, true);\n\n    return header;\n}\n\nconst url = uri => root + uri;\n\nconst psid = (header, loading) => {\n    if (loading && post.loader) {\n        post.loader.setState({\n            loading: true\n        });\n    }\n\n    let psid = localStorage.getItem('photon-session-id');\n    if (!psid) {\n        psid = '';\n        while (psid.length < 64) psid += Math.random().toString(36).substring(2);\n        psid = psid.substring(0, 64);\n        localStorage.setItem('photon-session-id', psid);\n    }\n    header['photon-session-id'] = psid;\n}\n\nconst loader = loader => post.loader = loader;\n\nexport {\n    service,\n    post,\n    upload,\n    url,\n    psid,\n    loader\n};","import React from 'react';\nimport { TreeSelect } from 'antd';\nimport { service } from '../http';\n\nclass Category extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            list: [],\n            value: ''\n        };\n        props.form.value(props.name, props.value);\n        service('/category/list', { key: props.list, pointTo: props.pointTo }).then(data => {\n            if (data === null)\n                return;\n\n            let state = {\n                list: [],\n                value: props.value\n            };\n            this.format(state.list, data);\n            this.setState(state);\n        });\n    }\n\n    format = (target, source) => {\n        if (source.length === 0)\n            return;\n\n        for (let category of source) {\n            let element = {\n                title: category.name,\n                value: category.id\n            };\n            if (category.children) {\n                element.children = [];\n                this.format(element.children, category.children);\n            }\n            target.push(element);\n        }\n    }\n\n    change = value => {\n        this.setState({\n            value: value\n        });\n        this.props.form.value(this.props.name, value);\n    }\n\n    render = () => <TreeSelect treeData={this.state.list} value={this.state.value} treeDefaultExpandedKeys={[this.state.value]} onChange={this.change} />;\n}\n\nexport default Category;","import React from 'react';\nimport { Avatar } from 'antd';\nimport { url } from '../http';\nimport './user.css'\n\nclass User extends React.Component {\n    render = () => {\n        if (!this.props.data)\n            return null;\n\n        let uids = this.uids();\n\n        return (\n            <div className=\"user\">\n                {this.avatar()}\n                <div className=\"user-info\">\n                    {uids.map(uid => <div className=\"user-uid\">{uid}</div>)}\n                    {this.line(uids, 'nick')}\n                    {this.line(uids, 'name')}\n                    {this.line(uids, 'mobile')}\n                    {this.line(uids, 'email')}\n                </div>\n            </div>\n        );\n    }\n\n    avatar = () => {\n        if (!this.props.data.avatar)\n            return null;\n\n        return <div className=\"user-avatar\"><Avatar src={url(this.props.data.avatar)} /></div>;\n    }\n\n    uids = () => {\n        if (!this.props.data.auth || this.props.data.auth.length <= 0)\n            return [];\n\n        let uids = [];\n        for (let i = 0; i < this.props.data.auth.length; i++)\n            if (!this.props.data.auth[i].type)\n                uids.push(this.props.data.auth[i].uid);\n\n        return uids;\n    }\n\n    line = (uids, name) => {\n        let value = this.props.data[name];\n        if (!value)\n            return null;\n\n        for (let uid of uids)\n            if (uid === value)\n                return null;\n\n        return <div className={'user-' + name}>{value}</div>;\n    }\n}\n\nexport default User;","import React from 'react';\nimport { Form, Row, Col, Radio, Select, DatePicker, Input, Button, Table, Divider, Menu, Dropdown, Modal, Switch } from 'antd';\nimport { MinusOutlined, PaperClipOutlined } from '@ant-design/icons';\nimport { service, url } from '../http';\nimport meta from './meta';\nimport { toMoney, toPercent } from './numeric';\nimport { toArray } from '../json';\nimport Category from './category';\nimport User from './user';\nimport './grid.css';\n\nconst { RangePicker } = DatePicker;\n\nclass Grid extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            list: [],\n            dselect: {},\n            pagination: false,\n            preview: null\n        };\n\n        let columns = meta.props(props.props, props.meta.props);\n        if (props.meta.search && props.meta.search.length > 0) {\n            this.form = React.createRef();\n            this.searchProps = meta.props(columns, props.meta.search);\n            this.search = <Search key=\"search\" props={this.searchProps} toolbar={props.meta.toolbar} grid={this} form={this.form} dselect={this.state.dselect} />;\n        } else if (props.meta.toolbar && props.meta.toolbar.length > 0) {\n            this.toolbar = [];\n            for (let toolbar of props.meta.toolbar) {\n                if (!toolbar.hidden) {\n                    this.toolbar.push(this.button(toolbar));\n                }\n            }\n        }\n\n        this.columns = [];\n        for (let prop of columns) {\n            let column = { key: prop.name, title: prop.label };\n            if (prop.labels)\n                column.render = model => this.style(prop, model, prop.multiple ? this.multiple(prop.labels, this.value(model, prop.name)) : prop.labels[this.value(model, prop.name)]);\n            else if (prop.values) {\n                if (prop.values instanceof Array)\n                    column.render = model => this.value(model, prop.name);\n                else\n                    column.render = model => this.style(prop, model, prop.multiple ? this.multiple(prop.values, this.value(model, prop.name)) : prop.values[this.value(model, prop.name)]);\n            } else if (prop.type === 'money' || prop.type === 'read-only:money')\n                column.render = model => this.style(prop, model, toMoney(this.value(model, prop.name), prop.empty));\n            else if (prop.type === 'percent' || prop.type === 'read-only:percent')\n                column.render = model => this.style(prop, model, toPercent(this.value(model, prop.name)));\n            else if (prop.type === 'image' || prop.type === 'read-only:image') {\n                column.render = model => {\n                    let value = this.value(model, prop.name);\n                    if (value === '') return this.style(prop, model, '');\n\n                    if (value.indexOf(',') === -1) return this.style(prop, model, <img src={url(value)} alt=\"\" onClick={this.preview} />);\n\n                    let imgs = [];\n                    for (let img of value.split(','))\n                        imgs.push(<img key={prop.name + imgs.length} src={url(img)} alt=\"\" onClick={this.preview} />);\n\n                    return this.style(prop, model, imgs);\n                }\n            } else if (prop.type === 'file' || prop.type === 'read-only:file') {\n                column.render = model => {\n                    let files = [];\n                    for (let file of toArray(this.value(model, prop.name))) {\n                        files.push(<div key={'file-' + files.length} className=\"file\">\n                            <PaperClipOutlined />\n                            <a href={url(file.uri)} target=\"_blank\" rel=\"noopener noreferrer\">{file.name}</a>\n                        </div>);\n                    }\n\n                    return this.style(prop, model, files);\n                }\n            } else if (prop.type === 'switch') {\n                column.render = model => {\n                    let s = { defaultChecked: this.value(model, prop.name) === 1 };\n                    if (prop.service)\n                        s.onChange = this.switch.bind(this, prop, model);\n                    else\n                        s.disabled = true;\n\n                    return this.style(prop, model, <Switch {...s} />);\n                }\n            } else if (prop.type === 'dselect') {\n                service(props.body.uri(props.uri, prop.service), prop.parameter).then(data => {\n                    if (data === null) return;\n\n                    let options = {};\n                    let vname = prop.vname || 'id';\n                    let lname = prop.lname || 'name';\n                    for (let d of data.list || data) {\n                        let option = d;\n                        if (lname.indexOf('+') > -1)\n                            // eslint-disable-next-line\n                            eval('option.label=' + lname);\n                        else\n                            option.label = d[lname];\n                        options[d[vname]] = option.label;\n                    }\n                    let dselect = this.state.dselect;\n                    dselect[prop.name] = options;\n                    this.setState({\n                        dselect: dselect\n                    });\n                });\n                column.render = model => this.style(prop, model, this.dselect(prop, model));\n            } else if (prop.type === 'editor' || prop.type === 'html')\n                column.render = model => this.style(prop, model, <div dangerouslySetInnerHTML={{ __html: this.value(model, prop.name) }} />);\n            else if (prop.type === 'user')\n                column.render = model => this.style(prop, model, <User data={this.value(model, prop.name)} />);\n            else if (prop.style)\n                column.render = model => this.style(prop, model, this.value(model, prop.name));\n            else\n                column.dataIndex = (prop.name || '').split('.');\n            this.columns.push(column);\n        }\n        if (props.meta.ops && props.meta.ops.length > 0) {\n            this.columns.push({\n                title: '',\n                render: model => {\n                    let mops = [];\n                    for (let op of props.meta.ops)\n                        // eslint-disable-next-line\n                        if (!op.when || eval(op.when))\n                            mops.push(op);\n\n                    let ops = [];\n                    if (mops.length <= 2) {\n                        for (let op of mops) {\n                            if (ops.length > 0) ops.push(<Divider key=\"divider\" type=\"vertical\" />);\n                            ops.push(this.action(op, model));\n                        }\n                    } else {\n                        ops.push(this.action(mops[0], model));\n                        ops.push(<Divider key=\"divider\" type=\"vertical\" />);\n                        let items = [];\n                        for (let i = 1; i < mops.length; i++) {\n                            items.push(<Menu.Item key={mops[i].label}>{this.action(mops[i], model)}</Menu.Item>);\n                        }\n                        ops.push(<Dropdown key=\"more\" overlay={<Menu>{items}</Menu>}><span className=\"console-grid-op\">更多</span></Dropdown>);\n                    }\n\n                    return <div className=\"console-grid-ops\">{ops}</div>;\n                }\n            });\n        }\n\n        this.load(null);\n    }\n\n    value = (model, name) => {\n        let m = model;\n        for (let n of name.split('.')) {\n            if (n in m)\n                m = m[n];\n            else\n                return '';\n        }\n\n        if (m === 0)\n            return 0;\n\n        return m || '';\n    }\n\n    multiple = (values, value) => {\n        if (!value) return '';\n\n        let labels = '';\n        for (let v of value) {\n            let label = values[v];\n            if (label)\n                labels += ',' + label;\n        }\n\n        return labels.length > 0 ? labels.substring(1) : '';\n    }\n\n    dselect = (prop, model) => {\n        let value = this.value(model, prop.name);\n        if (!this.state.dselect || !this.state.dselect[prop.name]) return 'value';\n\n        return this.state.dselect[prop.name][value];\n    }\n\n    style = (prop, model, element) => {\n        if (prop.style) {\n            for (let style of prop.style) {\n                try {\n                    // eslint-disable-next-line\n                    if (eval(style.condition))\n                        return <div style={style.value}>{element}</div>;\n                } catch (e) { }\n            }\n        }\n\n        return element;\n    }\n\n    button = op => <Button key={op.label} onClick={this.operate.bind(this, op, null)}>{op.label}</Button>;\n\n    action = (op, model) => <span key={op.label} className=\"console-grid-op\" onClick={this.operate.bind(this, op, model)}>{op.label}</span>;\n\n    operate = (op, model) => {\n        if (op.type === 'create' || op.type === 'ucreate') {\n            this.props.body.load(this.props.body.uri(this.props.uri, op.service || op.type), this.props.parameter, model && model.id ? { parent: model.id } : {});\n\n            return;\n        }\n\n        if (op.type === 'delete' || op.reload) {\n            this.reload(op, model, {});\n\n            return;\n        }\n\n        if (op.search) {\n            this.reload(op, model, this.searches());\n\n            return;\n        }\n\n        if (op.type === 'ids') {\n            let ids = '';\n            for (let m of this.state.list)\n                ids += ',' + m.id;\n            if (ids.length > 0)\n                this.reload(op, model, { ids: ids.substring(1) });\n\n            return;\n        }\n\n        if (op.type === 'upload') {\n            let input = document.createElement(\"input\");\n            input.type = 'file';\n            input.style.display = 'none';\n            input.onchange = e => {\n                if (!e.target.files || e.target.files.length === 0) return;\n\n                let reader = new FileReader();\n                let file = e.target.files[0];\n                reader.onload = () => {\n                    if (!reader.result || typeof reader.result !== 'string') {\n                        return;\n                    }\n\n                    service('/photon/ctrl/upload', {\n                        name: op.upload,\n                        fileName: file.name,\n                        contentType: file.type,\n                        base64: reader.result.substring(reader.result.indexOf(',') + 1)\n                    }).then(data => {\n                        document.body.removeChild(input);\n                        if (data === null) return;\n\n                        this.load({ current: this.pageNum || 1 });\n                    });\n                };\n                reader.readAsDataURL(file);\n            };\n            document.body.appendChild(input);\n            input.click();\n\n            return;\n        }\n\n        if (op.type === 'download') {\n            window.location.href = op.service;\n\n            return;\n        }\n\n        if (model && model.children)\n            delete model.children;\n\n        if (op.type === 'page')\n            this.props.body.page(op.page, this.props.parameter, model);\n        else\n            this.props.body.load(this.props.body.uri(this.props.uri, op.service || op.type), this.props.parameter, model);\n    }\n\n    preview = e => this.setState({ preview: e.currentTarget.src });\n\n    cancel = () => this.setState({ preview: null });\n\n    switch = (op, model, check) => {\n        let parameter = {};\n        parameter[op.name] = check ? 1 : 0;\n        this.reload(op, model, parameter);\n    }\n\n    reload = (op, model, parameter) => {\n        let param = { ...model, ...parameter }\n        if (op.parameter)\n            param = { ...param, ...op.parameter };\n        if (this.props.parameter)\n            param = { ...param, ...this.props.parameter };\n        service(this.props.body.uri(this.props.uri, op.service || op.type), param).then(data => {\n            if (data === null) return;\n\n            this.load({ current: this.pageNum || 1 });\n        });\n    }\n\n    load = pagination => {\n        let parameter = this.searches();\n        if (pagination)\n            parameter.pageNum = pagination.current;\n        if (this.props.parameter)\n            parameter = { ...parameter, ...this.props.parameter };\n        service(this.props.uri, parameter).then(data => {\n            if (data === null) return;\n\n            this.setState({\n                list: []\n            }, () => {\n                if (data instanceof Array) {\n                    this.setState({\n                        list: data\n                    });\n                } else {\n                    this.pageNum = data.number;\n                    let state = { list: data.list };\n                    if (data.count <= data.size)\n                        state.pagination = false;\n                    else {\n                        state.pagination = {\n                            total: data.count,\n                            pageSize: data.size,\n                            current: data.number\n                        };\n                    }\n                    if (this.props.meta.info)\n                        state[this.props.meta.info] = data[this.props.meta.info];\n                    this.setState(state);\n                }\n            });\n        });\n    }\n\n    searches = () => {\n        if (!this.form || !this.form.current || !this.searchProps || this.searchProps.length === 0) return {};\n\n        let values = this.form.current.getFieldsValue();\n        for (let column of this.searchProps) {\n            if (column.type === 'range') {\n                values[column.name] = (values[column.name + \"Start\"] || '') + ',' + (values[column.name + \"End\"] || '');\n                delete values[column.name + \"Start\"];\n                delete values[column.name + \"End\"];\n\n                continue;\n            }\n\n            let value = values[column.name];\n            if (!value) continue;\n\n            if (column.type === 'date') {\n                values[column.name] = value.format('YYYY-MM-DD');\n            } else if (column.type === 'date-range') {\n                if (value.length === 0)\n                    values[column.name] = '';\n                else\n                    values[column.name] = value[0].format('YYYY-MM-DD') + ',' + value[1].format('YYYY-MM-DD')\n            }\n        }\n\n        return values;\n    }\n\n    render = () => {\n        let elements = [];\n        if (this.props.meta.info)\n            elements.push(<div key={'info:' + this.props.meta.info} className=\"console-info\" dangerouslySetInnerHTML={{ __html: this.state[this.props.meta.info] }} />);\n        if (this.search) elements.push(this.search);\n        else if (this.toolbar) elements.push(<div key=\"toolbar\" className=\"console-grid-toolbar\">{this.toolbar}</div>);\n        elements.push(<Table key=\"table\" columns={this.columns} dataSource={this.state.list} rowKey=\"id\" pagination={this.state.pagination}\n            onChange={this.load} className=\"console-grid\" />);\n        elements.push(\n            <Modal key=\"preview\" visible={this.state.preview != null} footer={null} onCancel={this.cancel}>\n                <img style={{ width: '100%' }} src={this.state.preview} alt=\"\" />\n            </Modal>\n        );\n\n        return elements;\n    }\n}\n\nclass Search extends React.Component {\n    render = () => {\n        let cols = [];\n        let initialValues = {};\n        for (let column of this.props.props) {\n            if (column.labels) initialValues[column.name] = '';\n\n            let item = { label: column.label };\n            if (column.type !== 'range')\n                item.name = column.name;\n            cols.push(\n                <Col span={6} key={column.name}>\n                    <Form.Item {...item}>{this.input(column)}</Form.Item>\n                </Col>\n            );\n        }\n        let toolbar = [];\n        toolbar.push(<Button key=\"search\" type=\"primary\" htmlType=\"submit\">搜索</Button>);\n        if (this.props.toolbar && this.props.toolbar.length > 0) {\n            for (let button of this.props.toolbar) {\n                if (!button.hidden) {\n                    toolbar.push(this.props.grid.button(button));\n                }\n            }\n        }\n        cols.push(<span key=\"toolbar\" className=\"console-grid-search-toolbar\">{toolbar}</span>);\n\n        return (\n            <Form ref={this.props.form} className=\"console-grid-search-form\" initialValues={initialValues} onFinish={this.finish}>\n                <Row gutter={24}>{cols}</Row>\n            </Form>\n        );\n    }\n\n    input = column => {\n        if (column.labels) {\n            let options = [{ label: '全部', value: '' }];\n            for (let index in column.labels)\n                options.push({ label: column.labels[index], value: index });\n\n            return options.length <= 3 ? <Radio.Group options={options} /> : <Select options={options} />;\n        }\n\n        if (column.values) {\n            let options = [{ label: '全部', value: '' }];\n            let keys = Object.keys(column.values);\n            for (let index in keys)\n                options.push({ label: column.values[keys[index]], value: keys[index] });\n\n            return options.length <= 3 ? <Radio.Group options={options} /> : <Select options={options} />;\n        }\n\n        if (column.type === 'date')\n            return <DatePicker />;\n\n        if (column.type === 'date-range')\n            return <RangePicker />;\n\n        if (column.type === 'range') {\n            return (\n                <Input.Group className=\"console-grid-search-range\" compact>\n                    <Form.Item name={column.name + 'Start'} noStyle><Input /></Form.Item>\n                    <span className=\"range-minus\"><MinusOutlined /></span>\n                    <Form.Item name={column.name + 'End'} noStyle><Input /></Form.Item>\n                </Input.Group>\n            );\n        }\n\n        if (column.type === 'switch') {\n            return (\n                <Radio.Group initValue={''}>\n                    <Radio value={''}>全部</Radio>\n                    <Radio value={'0'}>否</Radio>\n                    <Radio value={'1'}>是</Radio>\n                </Radio.Group>\n            );\n        }\n\n        if (column.type === 'category')\n            return <Category list={column.category} pointTo={column.pointTo} name={column.name} form={this} />;\n\n        return <Input />\n    }\n\n    value = (name, value) => {\n        console.log(name + \";\" + value);\n    }\n\n    finish = () => {\n        this.props.grid.load(null);\n    }\n}\n\nexport default Grid;","import React from 'react';\nimport { Select } from 'antd';\nimport { service } from '../http';\n\nclass DSelect extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (props.form)\n            props.form.value(props.name, props.value);\n\n        this.vname = props.vname || 'id';\n        this.lname = props.lname || 'name';\n        this.state = {\n            options: [],\n            value: props.value\n        };\n    }\n\n    componentDidMount = () => {\n        this.search('');\n    }\n\n    focus = () => {\n        this.search('');\n    }\n\n    search = (value) => {\n        let parameter = {};\n        if (this.props.search) {\n            for (let i = 0; i < this.props.search.length; i++) {\n                if (i === this.props.search.length - 1)\n                    parameter[this.props.search[i].name] = value;\n                else if (this.props.search[i].form)\n                    parameter[this.props.search[i].name || this.props.search[i].form] = this.props.form.value(this.props.search[i].form, null);\n            }\n        } else\n            parameter.value = value;\n        service(this.props.body.uri(this.props.uri, this.props.service), { ...parameter, ...this.props.parameter }).then(data => {\n            if (data === null) return;\n\n            let options = []\n            for (let option of data.list || data) {\n                let label = option[this.vname];\n                if (this.lname.indexOf('+') > -1)\n                    // eslint-disable-next-line\n                    eval('label=' + this.lname);\n                else\n                    label = option[this.lname];\n                options.push({\n                    label: label,\n                    value: option[this.vname]\n                });\n            }\n            this.setState({ options });\n        });\n    }\n\n    filter = (input, option) => {\n        if (!option) return false;\n\n        if (input === '') return true;\n\n        return option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0 || option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    }\n\n    change = value => {\n        this.setState({ value: value });\n        this.props.form.value(this.props.name, value);\n    }\n\n    render = () => <Select showSearch={true} onFocus={this.focus} onSearch={this.search} filterOption={this.filter} onChange={this.change} value={this.state.value} options={this.state.options} />;\n}\n\nexport default DSelect;","const toArray = text => {\n    if (!text)\n        return [];\n\n    if (typeof (text) === 'object')\n        return text;\n\n    try {\n        let array = JSON.parse(text);\n\n        return array instanceof Array ? array : [];\n    } catch (e) {\n        return [];\n    }\n}\n\nexport {\n    toArray\n}","import React from 'react';\nimport { Row, Col, Card, Statistic, Table } from 'antd';\nimport { service } from '../http';\nimport meta from './meta';\nimport './dashboard.css';\n\nclass Dashboard extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            columns: []\n        };\n        this.timeout = null;\n        service('/console/dashboard').then(data => {\n            if (data === null) return;\n\n            let state = { columns: data };\n            for (let i = 0; i < data.length; i++) {\n                for (let j = 0; j < data[i].cards.length; j++) {\n                    let card = data[i].cards[j];\n                    card.key = i + '-' + j;\n                    card.load = false;\n                    state[card.key] = {};\n                    meta.get(card.service).then(mt => {\n                        let m = mt[card.service.substring(card.service.lastIndexOf('/') + 1)];\n                        if (!m) return;\n\n                        card.meta = m;\n                        if (m.type === 'grid') {\n                            card.columns = [];\n                            for (let prop of meta.props(mt.props, m.props)) {\n                                card.columns.push({\n                                    title: prop.label,\n                                    dataIndex: prop.name,\n                                    key: prop.name\n                                });\n                            }\n                        }\n                    });\n                }\n            }\n            this.setState(state, this.load);\n        });\n    }\n\n    render = () => <Row gutter={[8, 8]}>{this.state.columns.map((column, index) => <Col key={index} span={column.span}>{this.cards(index, column.cards)}</Col>)}</Row>;\n\n    cards = (index, cards) => {\n        let elements = [];\n        for (let i = 0; i < cards.length; i++) {\n            if (i > 0)\n                elements.push(<div key={'space:' + index + '-' + i} className=\"console-dashboard-space\" />);\n            elements.push(<Card key={'card:' + index + '-' + i} title={cards[i].title}>{this.card(cards[i])}</Card>);\n        }\n\n        return elements;\n    }\n\n    card = card => {\n        if (!card.load || !card.meta) return null;\n\n        switch (card.meta.type) {\n            case 'statistic':\n                return this.statistic(card);\n            case 'grid':\n                return this.grid(card);\n            default:\n                return null;\n        }\n    }\n\n    statistic = card => {\n        if (card.meta.props.length === 0) return null;\n\n        let span = card.meta.props.length < 3 ? (24 / card.meta.props.length) : 8;\n\n        return <Row gutter={[8, 8]}>{card.meta.props.map(prop => <Col key={prop.name} span={span}><Statistic title={prop.label} value={this.state[card.key][prop.name]} /></Col>)}</Row>;\n    }\n\n    grid = card => {\n        let data = this.state[card.key] || {};\n\n        return <Table columns={card.columns} dataSource={data.list || data} pagination={false} />;\n    }\n\n    load = () => {\n        this.timeout = setTimeout(this.load, 10 * 1000);\n        for (let column of this.state.columns) {\n            for (let card of column.cards) {\n                if (card.load && !card.reload)\n                    continue;\n\n                service(card.service, card.parameter).then(data => {\n                    card.load = true;\n                    if (data === null) return;\n\n                    let state = {};\n                    state[card.key] = data;\n                    this.setState(state);\n                });\n            }\n        }\n    }\n\n    componentWillUnmount = () => {\n        if (this.timeout !== null)\n            clearTimeout(this.timeout);\n    }\n}\n\nexport default Dashboard;","import React from 'react';\nimport { Upload, Modal } from 'antd';\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons';\nimport { url, upload } from '../http';\nimport './image.css';\n\nclass Image extends React.Component {\n    state = {\n        uri: null,\n        changed: false,\n        loading: false,\n        preview: null,\n        remove: 0\n    };\n\n    upload = uploader => {\n        this.setState({ loading: true });\n        upload(this.props.upload, uploader.file).then(data => {\n            if (data === null) {\n                this.setState({ loading: false });\n\n                return;\n            }\n\n            let uri = this.state.changed ? this.state.uri : this.props.value;\n            let path = data.thumbnail || data.path;\n            uri = uri ? (uri + ',' + path) : path;\n            this.setState({\n                uri: uri,\n                changed: true,\n                loading: false\n            }, () => {\n                this.props.form.value(this.props.name, this.state.uri)\n            });\n        });\n    }\n\n    preview = file => {\n        this.setState({ preview: file.url });\n    }\n\n    cancel = () => {\n        this.setState({ preview: null });\n    }\n\n    remove = file => {\n        if (this.props.readonly) return;\n\n        let uri = this.state.changed ? this.state.uri : this.props.value;\n        if (!uri) return;\n\n        let uris = uri.split(',');\n        let u = '';\n        for (let i in uris) {\n            if (i === file.uid) continue;\n\n            if (u.length > 0) u += ',';\n            u += uris[i];\n        }\n        this.setState({\n            uri: u,\n            changed: true\n        }, () => this.props.form.value(this.props.name, this.state.uri));\n    }\n\n    render = () => {\n        let uri = this.state.changed ? this.state.uri : this.props.value;\n        if (!this.state.changed && this.props.value) {\n            this.props.form.value(this.props.name, this.props.value);\n        }\n        let list = [];\n        if (uri) {\n            let uris = uri.split(',');\n            for (let i in uris) {\n                list.push({\n                    uid: '' + i,\n                    name: uris[i],\n                    url: url(uris[i]),\n                    status: 'done'\n                });\n            }\n        }\n\n        let props = {\n            listType: 'picture-card',\n            fileList: list,\n            className: 'image-uploader',\n            customRequest: this.upload,\n            onPreview: this.preview\n        }\n        if (!this.props.readonly)\n            props.onRemove = this.remove;\n\n        return (\n            <div className=\"clearfix\">\n                <Upload {...props} >\n                    {this.props.readonly || (this.props.size > 0 && list.length >= this.props.size) ? null : (this.state.loading ? <LoadingOutlined /> : <PlusOutlined />)}\n                </Upload>\n                <Modal visible={this.state.preview != null} footer={null} onCancel={this.cancel}>\n                    <img alt=\"preview\" style={{ width: '100%' }} src={this.state.preview} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nexport default Image;","import React from 'react';\nimport { Upload, Button } from 'antd';\nimport { PaperClipOutlined, UploadOutlined } from '@ant-design/icons';\nimport UploadSupport from './upload';\nimport { toArray } from '../json';\nimport { url } from '../http';\n\nclass File extends UploadSupport {\n    state = {\n        list: null\n    }\n\n    render = () => {\n        if (this.props.readonly) {\n            let files = [];\n            try {\n                for (let file of toArray(this.props.value)) {\n                    files.push(<div key={'file-' + files.length} className=\"console-form-file\">\n                        <PaperClipOutlined />\n                        <a href={url(file.uri)} target=\"_blank\" rel=\"noopener noreferrer\">{file.name}</a>\n                    </div>);\n                }\n            } catch (e) { }\n\n            return files;\n        }\n\n        let props = {\n            action: this.action,\n            name: this.props.upload,\n            multiple: true,\n            progress: {\n                strokeColor: {\n                    '0%': '#108ee9',\n                    '100%': '#87d068',\n                },\n                strokeWidth: 3,\n                format: percent => `${parseFloat(percent.toFixed(2))}%`,\n            },\n            fileList: this.list(),\n            onChange: this.change\n        };\n\n        return (\n            <Upload {...props}>\n                <Button><UploadOutlined /> 上传</Button>\n            </Upload>\n        );\n    }\n}\n\nexport default File;","import React from 'react';\nimport { message } from 'antd';\nimport { url } from '../http';\nimport { toArray } from '../json';\n\nclass UploadSupport extends React.Component {\n    action = url('/photon/ctrl-http/upload');\n\n    change = ({ file }) => {\n        if (file.status === 'uploading') {\n            let list = this.list();\n            for (let f of list)\n                if (f.uid === file.uid)\n                    return;\n\n            list.push(file);\n            this.setState({ list });\n\n            return;\n        }\n\n        if (file.status === 'done') {\n            if (file.response.success) {\n                this.value();\n\n                return;\n            }\n\n            let list = [];\n            for (let f of this.list())\n                if (f.uid !== file.uid)\n                    list.push(f);\n            this.setState({ list });\n            message.warn(file.response.message);\n\n            return;\n        }\n\n        if (file.status === 'removed') {\n            let list = [];\n            for (let f of this.list()) {\n                if (f.uid === file.uid)\n                    continue;\n\n                list.push(f);\n            }\n            this.setState({ list: list });\n            this.value();\n\n            return;\n        }\n    }\n\n    value = () => {\n        let list = [];\n        for (let file of this.state.list) {\n            if (!file.uri) {\n                file.uri = file.response.path;\n                if (file.response.thumbnail)\n                    file.thumbnail = file.response.thumbnail;\n                file.url = url(file.uri);\n            }\n            let f = {\n                name: file.name,\n                uri: file.uri\n            };\n            if (file.thumbnail)\n                f.thumbnail = file.thumbnail;\n            list.push(f);\n        }\n        this.props.form.value(this.props.name, JSON.stringify(list));\n    }\n\n    list = () => {\n        if (this.state.list !== null)\n            return this.state.list;\n\n        let list = this.props.value ? toArray(this.props.value) : [];\n        for (let i = 0; i < list.length; i++) {\n            list[i].uid = '' + i;\n            list[i].url = url(list[i].uri);\n            list[i].status = 'done';\n        }\n\n        return list;\n    }\n}\n\nexport default UploadSupport;","import React from 'react';\nimport { EditorState, ContentState, convertToRaw } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport './editor.css';\n\nclass Wysiwyg extends React.Component {\n    state = {\n        editor: EditorState.createEmpty(),\n        changed: false\n    };\n\n    change = state => {\n        this.setState({\n            editor: state,\n            changed: true\n        });\n        this.props.form.value(this.props.name, draftToHtml(convertToRaw(state.getCurrentContent())));\n    }\n\n    render = () => {\n        let state = this.state.editor;\n        if (!this.state.changed && this.props.value) {\n            this.props.form.value(this.props.name, this.props.value);\n            let content = htmlToDraft(this.props.value);\n            if (content)\n                state = EditorState.createWithContent(ContentState.createFromBlockArray(content));\n        }\n\n        return <Editor editorState={state} localization={{ locale: 'zh', }} onEditorStateChange={this.change} />;\n    }\n}\n\nexport default Wysiwyg;","import React from 'react';\nimport { Form, Radio, Checkbox, Select, DatePicker, Switch, Input, Button, message } from 'antd';\nimport { SyncOutlined, VerticalAlignTopOutlined, ArrowUpOutlined, ArrowDownOutlined, VerticalAlignBottomOutlined, DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport { service } from '../http';\nimport meta from './meta';\nimport { toMoney, fromMoney, toPercent, fromPercent, toInt } from './numeric';\nimport { toArray } from '../json';\nimport Image from './image';\nimport File from './file';\nimport DSelect from './dselect';\nimport Editor from './editor';\nimport Category from './category';\nimport User from './user';\nimport './form.css';\n\nconst layout = {\n    labelCol: {\n        xs: {\n            span: 24\n        },\n        sm: {\n            span: 6\n        }\n    },\n    wrapperCol: {\n        xs: {\n            span: 24\n        },\n        sm: {\n            span: 12\n        }\n    }\n};\n\nclass Base extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.form = React.createRef();\n        this.state = props.data || {};\n        this.format(this.state);\n        this.values = {};\n        this.itemIndex = 0;\n    }\n\n    componentDidMount = () => {\n        if (this.props.uri && !this.props.data) {\n            this.load().then(data => {\n                if (data === null) return;\n\n                this.data(data);\n            });\n        }\n\n        for (let prop of meta.props(this.props.props, this.props.meta.props)) {\n            if (prop.type === 'agreement') {\n                service('/keyvalue/object', { key: prop.agreement }).then(data => {\n                    if (data === null) return;\n\n                    let array = toArray(data[prop.agreement]);\n                    if (array.length === 0) return;\n\n                    data[prop.agreement] = array[0];\n                    this.setState(data);\n                });\n            }\n        }\n    }\n\n    data = data => {\n        let values = this.form.current.getFieldsValue();\n        for (let key in values) {\n            values[key] = data[key];\n        }\n        this.format(values);\n        this.form.current.setFieldsValue(values);\n        this.setState(data);\n    }\n\n    format = (values) => {\n        for (let prop of meta.props(this.props.props, this.props.meta.props)) {\n            let value = values[prop.name];\n            if (prop.labels)\n                values[prop.name] = toInt(value, 0);\n            else if (prop.type === 'money')\n                values[prop.name] = toMoney(value, prop.empty);\n            else if (prop.type === 'percent')\n                values[prop.name] = toPercent(value);\n            else if (prop.type === 'switch')\n                values[prop.name] = value === 1 || value === '1';\n            else if (prop.type === 'array') {\n                let array = toArray(value);\n                for (let i = 0; i < array.length; i++)\n                    for (let k in array[i])\n                        values[prop.name + ':' + k + ':' + i] = array[i][k];\n            } else if (value) {\n                if (prop.type === 'date')\n                    values[prop.name] = moment(value, 'YYYY-MM-DD');\n                else if (prop.type === 'datetime')\n                    values[prop.name] = moment(value, 'YYYY-MM-DD HH:mm:ss');\n            }\n            if (prop.multiple)\n                values[prop.name] = values[prop.name] ? values[prop.name].split(',') : [];\n        }\n    }\n\n    value = (name, value) => {\n        if (value === null) {\n            let values = this.form.current ? this.form.current.getFieldsValue() : {};\n\n            return values[name] || this.values[name];\n        }\n\n        this.values[name] = value;\n    }\n\n    button = mt => {\n        let values = this.form.current.getFieldsValue();\n        for (let prop of meta.props(this.props.props, this.props.meta.props)) {\n            let value = values[prop.name];\n            if (prop.type === 'switch') {\n                values[prop.name] = value ? 1 : 0;\n\n                continue;\n            }\n\n            if (!value && value !== '') {\n                delete values[prop.name];\n\n                continue;\n            };\n\n            if (prop.type === 'date')\n                values[prop.name] = value.format(\"YYYY-MM-DD\");\n            else if (prop.type === 'datetime')\n                values[prop.name] = value.format(\"YYYY-MM-DD HH:mm:ss\");\n            else if (prop.type === 'money')\n                values[prop.name] = fromMoney(value);\n            else if (prop.type === 'percent')\n                values[prop.name] = fromPercent(value);\n            else if (prop.multiple)\n                values[prop.name] = values[prop.name].join(',');\n        }\n        if (this.props.data)\n            for (let key in this.props.data)\n                if (!(key in values) && this.props.data[key])\n                    values[key] = this.props.data[key];\n        this.submit(mt, { ...values, ...this.values }).then(data => {\n            if (data === null) return;\n\n            if (mt.reload)\n                this.props.body.load(this.props.uri, this.props.parameter, this.props.data);\n            else if (mt.success)\n                this.props.body.load(this.props.body.uri(this.props.uri, mt.success), this.props.parameter, this.props.data);\n            else if (mt.data)\n                this.data(data);\n            else\n                message.success('操作已完成！');\n        });\n    }\n\n    cancel = mt => {\n        this.props.body.load(this.props.body.uri(this.props.uri, mt.success), this.props.parameter);\n    }\n\n    render = () => {\n        this.itemIndex = 0;\n        let items = [];\n        if (this.props.meta.info)\n            items.push(<div key={'info:' + this.props.meta.info} className=\"console-info\" dangerouslySetInnerHTML={{ __html: this.state[this.props.meta.info] }} />);\n        for (let prop of meta.props(this.props.props, this.props.meta.props))\n            this.item(items, prop, '');\n\n        return (\n            <Form ref={this.form} {...layout} initialValues={this.state}>\n                {items}\n                <Form.Item className=\"console-form-toolbar\" label=\"toolbar\">{this.toolbar()}</Form.Item>\n            </Form>\n        );\n    }\n\n    item = (items, prop, key) => {\n        if (prop.type === 'array') {\n            let is = [];\n            let array = toArray(this.state[prop.name]);\n            for (let i = 0; i < array.length; i++) {\n                if (array[i] === null)\n                    continue;\n\n                is.push(<div key={prop.name + ':divider:' + i} className=\"console-form-children-divider\" />);\n                for (let child of prop.children) {\n                    let c = JSON.parse(JSON.stringify(child));\n                    c.name = prop.name + ':' + c.name + ':' + i;\n                    this.item(is, c, prop.name + ':');\n                }\n                if (!prop.fix) {\n                    is.push(\n                        <div key={prop.name + ':toolbar:' + i} className=\"console-form-children-toolbar\">\n                            {i > 0 ? <div onClick={this.move.bind(this, prop, array.length, i, 0)}><VerticalAlignTopOutlined /></div> : null}\n                            {i > 0 ? <div onClick={this.move.bind(this, prop, array.length, i, i - 1)}><ArrowUpOutlined /></div> : null}\n                            {i < array.length - 1 ? <div onClick={this.move.bind(this, prop, array.length, i, i + 1)}><ArrowDownOutlined /></div> : null}\n                            {i < array.length - 1 ? <div onClick={this.move.bind(this, prop, array.length, i, array.length - 1)}><VerticalAlignBottomOutlined /></div> : null}\n                            <div onClick={this.remove.bind(this, prop, i)}><DeleteOutlined /></div>\n                        </div>\n                    );\n                }\n            }\n            items.push(\n                <div key={prop.name} className=\"console-form-children\">\n                    <div className=\"console-form-children-title\">{prop.label}</div>\n                    {is}\n                    {prop.fix ? null : <div className=\"console-form-children-divider\" />}\n                    {prop.fix ? null : <div className=\"console-form-children-plus\"><Button onClick={this.plus.bind(this, prop)}><PlusOutlined /></Button></div>}\n                </div>\n            );\n            this.itemIndex++;\n\n            return;\n        }\n\n        let item = {\n            key: key + prop.name,\n            className: 'console-form-item console-form-item-' + (this.itemIndex++ % 2 === 0 ? 'odd' : 'even'),\n            label: prop.label\n        };\n        if (prop.type && prop.type.startsWith('read-only')) {\n            items.push(<Form.Item {...item}>{this.readonly(prop)}</Form.Item>);\n        } else if (prop.type === 'image') {\n            items.push(<Form.Item {...item}><Image name={prop.name} upload={prop.upload} size={prop.size || 1} value={this.state[prop.name] || ''} form={this} /></Form.Item>);\n        } else if (prop.type === 'file') {\n            items.push(<Form.Item {...item}><File name={prop.name} upload={prop.upload} size={prop.size || 1} value={this.state[prop.name] || ''} form={this} /></Form.Item>);\n        } else if (prop.type === 'dselect') {\n            items.push(<Form.Item {...item}><DSelect body={this.props.body} uri={this.props.uri} {...prop} value={this.state[prop.name]} data={this.props.data} form={this} /></Form.Item>);\n        } else if (prop.type === 'refresh') {\n            items.push(<Form.Item {...item}>{this.state[prop.name] || ''} {prop.service ? <Button icon={<SyncOutlined alt={prop.label} />} onClick={this.refresh.bind(this, prop)} /> : null}</Form.Item>);\n        } else if (prop.type === 'editor') {\n            items.push(<Form.Item {...item}><Editor name={prop.name} value={this.state[prop.name] || ''} form={this} /></Form.Item>);\n        } else if (prop.type === 'html') {\n            items.push(<Form.Item {...item}><div dangerouslySetInnerHTML={{ __html: this.state[prop.name] || '' }} /></Form.Item>);\n        } else if (prop.type === 'agreement') {\n            let value = this.state[prop.agreement] || { uri: '', name: '' };\n            if (value) {\n                let label = value.name;\n                let index = label.lastIndexOf('.');\n                if (index > -1) label = label.substring(0, index);\n                item.className += ' console-form-agreement';\n                item.label = 'agreement';\n                items.push(<Form.Item {...item}><a href={value.uri + '?filename=' + value.name} target=\"_blank\" rel=\"noopener noreferrer\">{label}</a></Form.Item>);\n            }\n        } else if (prop.type === 'category') {\n            let list = prop.category;\n            if (!list && this.props.parameter && this.props.parameter.key)\n                list = this.props.parameter.key;\n            items.push(<Form.Item {...item}><Category list={list} pointTo={prop.pointTo} name={prop.name} value={this.state[prop.name]} form={this} /></Form.Item>);\n        } else if (prop.type === 'user') {\n            items.push(<Form.Item {...item}><User data={this.state[prop.name]} /></Form.Item>);\n        } else {\n            if (prop.type === 'switch')\n                item.valuePropName = 'checked';\n            items.push(<Form.Item {...item} name={prop.name}>{this.input(prop)}</Form.Item>);\n        }\n    }\n\n    plus = (prop) => {\n        let obj = {};\n        for (let child of prop.children)\n            obj[child.name] = '';\n        let data = toArray(this.state[prop.name]);\n        data.push(obj);\n        let state = {};\n        state[prop.name] = data;\n        this.setState(state);\n    }\n\n    move = (prop, length, from, to) => {\n        let state = {};\n        for (let child of prop.children) {\n            if (from < to) {\n                for (let i = 0; i < from; i++)\n                    this.moveCopy(prop, child, state, i, i);\n                for (let i = from; i < to; i++)\n                    this.moveCopy(prop, child, state, i + 1, i);\n                this.moveCopy(prop, child, state, from, to);\n                for (let i = to + 1; i < length; i++)\n                    this.moveCopy(prop, child, state, i, i);\n            }\n            else {\n                for (let i = 0; i < to; i++)\n                    this.moveCopy(prop, child, state, i, i);\n                this.moveCopy(prop, child, state, from, to);\n                for (let i = to; i < from; i++)\n                    this.moveCopy(prop, child, state, i, i + 1);\n                for (let i = from + 1; i < length; i++)\n                    this.moveCopy(prop, child, state, i, i);\n            }\n        }\n        this.setState(state, () => this.form.current.setFieldsValue(state));\n    }\n\n    moveCopy = (prop, child, state, source, target) => {\n        let value = this.state[prop.name + ':' + child.name + ':' + source];\n        // if (value || value === 0)\n            state[prop.name + ':' + child.name + ':' + target] = value;\n    }\n\n    remove = (prop, index) => {\n        let array = toArray(this.state[prop.name]);\n        array[index] = null;\n        let state = {};\n        state[prop.name] = array;\n        this.setState(state);\n    }\n\n    readonly = prop => {\n        let value = this.state[prop.name];\n        if (prop.type === 'read-only:money')\n            return toMoney(value, prop.empty);\n\n        if (prop.type === 'read-only:percent')\n            return toPercent(value);\n\n        if (prop.type === 'read-only:image')\n            return <Image name={prop.name} upload={prop.upload} size={prop.size || 1} readonly={true} value={this.state[prop.name] || ''} form={this} />;\n\n        if (prop.type === 'read-only:file')\n            return <File name={prop.name} upload={prop.upload} readonly={true} value={this.state[prop.name] || ''} form={this} />;\n\n        if (prop.labels)\n            return prop.multiple ? this.multiple(prop.labels, value) : (prop.labels[value] || '');\n\n        if (prop.values)\n            return prop.multiple ? this.multiple(prop.values, value) : (prop.values[value] || '');\n\n        if (value === 0)\n            return 0;\n\n        return value || '';\n    }\n\n    multiple = (values, value) => {\n        if (!value) return '';\n\n        let labels = '';\n        for (let v of value) {\n            let label = values[v];\n            if (label)\n                labels += ',' + label;\n        }\n\n        return labels.length > 0 ? labels.substring(1) : '';\n    }\n\n    input = prop => {\n        if (prop.labels) {\n            let options = [];\n            for (let index in prop.labels)\n                options.push({ label: prop.labels[index], value: toInt(index, 0) });\n\n            if (prop.multiple)\n                return options.length < 5 ? <Checkbox.Group options={options} /> : <Select options={options} mode=\"multiple\" allowClear />;\n\n            return options.length < 5 ? <Radio.Group options={options} /> : <Select options={options} />;\n        }\n\n        if (prop.values) {\n            let options = [];\n            if (prop.values instanceof Array) {\n                for (let value of prop.values)\n                    options.push({ label: value, value: value });\n            }\n            else if (prop.values instanceof Object) {\n                let keys = Object.keys(prop.values);\n                for (let index in keys) {\n                    let key = keys[index];\n                    options.push({ label: prop.values[key] || key, value: key });\n                }\n            }\n\n            if (prop.multiple)\n                return options.length < 5 ? <Checkbox.Group options={options} /> : <Select options={options} mode=\"multiple\" allowClear />;\n\n            return options.length < 5 ? <Radio.Group options={options} /> : <Select options={options} />;\n        }\n\n        if (prop.type === 'date') return <DatePicker />;\n\n        if (prop.type === 'datetime') return <DatePicker showTime={true} />;\n\n        if (prop.type === 'switch') return <Switch disabled={!prop.service && !prop.permit} onChange={this.switch.bind(this, prop)} />;\n\n        if (prop.type === 'text-area') return <Input.TextArea autoSize={{ minRows: 2 }} />;\n\n        if (prop.type === 'password') return <Input.Password />;\n\n        return <Input />\n    }\n\n    switch = (prop, check) => {\n        this.value(prop.name, check ? 1 : 0);\n    }\n\n    refresh = (prop) => {\n        service(this.props.body.uri(this.props.uri, prop.service), { id: this.props.data.id }).then(data => {\n            if (data === null) return;\n\n            this.props.body.load(this.props.uri, this.props.parameter, data);\n        });\n    }\n\n    toolbar = () => {\n        let buttons = [];\n        if (!this.props.meta.toolbar || this.props.meta.toolbar.length <= 0)\n            return buttons;\n\n        let one = this.props.meta.toolbar.length === 1;\n        if (this.props.meta.toolbar) {\n            for (let toolbar of this.props.meta.toolbar) {\n                if (toolbar.hidden) continue;\n\n                let button = {\n                    key: toolbar.label\n                };\n                if (one) {\n                    button.type = 'primary';\n                    button.htmlType = 'submit';\n                }\n                buttons.push(<Button {...button} onClick={this.button.bind(this, toolbar)}>{toolbar.label}</Button>);\n                if (toolbar.success && one)\n                    buttons.push(<Button key=\"cancel\" type=\"dashed\" onClick={this.cancel.bind(this, toolbar)}>取消</Button>);\n            }\n        }\n\n        return buttons;\n    }\n}\n\nclass Normal extends Base {\n    load = () => service(this.props.body.uri(this.props.uri, this.props.meta.service), this.props.parameter);\n\n    submit = (mt, values) => {\n        for (let prop of this.props.meta.props) {\n            if (prop.type === 'array') {\n                let array = [];\n                let state = toArray(this.state[prop.name]);\n                for (let key in values) {\n                    if (values[key] === undefined) {\n                        delete values[key];\n\n                        continue;\n                    }\n\n                    if (key.indexOf(prop.name) > -1) {\n                        let ks = key.split(':');\n                        let index = toInt(ks[2]);\n                        if (state[index] === null) {\n                            delete values[key];\n\n                            continue;\n                        }\n\n                        let obj = array[index] || {};\n                        obj[ks[1]] = values[key];\n                        delete values[key];\n                        array[index] = obj;\n                    }\n                }\n                let arr = [];\n                for (let obj of array)\n                    if (obj)\n                        arr.push(obj);\n                values[prop.name] = JSON.stringify(arr);\n            }\n        }\n\n        return service(this.props.body.uri(this.props.uri, mt.service || mt.type), { ...values, ...this.props.parameter });\n    }\n}\n\nexport default Normal;\n\nexport { Base };","import { service } from '../http';\nimport { Base } from './form';\n\nclass Setting extends Base {\n    load = () => service('/keyvalue/object', { key: this.key() });\n\n    submit = (mt, values) => {\n        let array = [];\n        for (let name in values) {\n            array.push({\n                key: name,\n                value: values[name] || ''\n            });\n        }\n\n        return service('/keyvalue/saves', { kvs: JSON.stringify(array) });\n    }\n\n    key = () => this.props.uri.substring(1).replace(/\\//g, '.') + '.';\n}\n\nexport default Setting;","import React from 'react';\nimport { Select, Tree, Button } from 'antd';\nimport { service } from '../http';\nimport './crosier.css';\n\nclass Crosier extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n        service('/user/crosier/grades').then(data => {\n            if (data == null) return;\n\n            this.setState({\n                grades: data,\n                grade: 0\n            }, () => this.grade(0));\n        });\n        service('/console/menu', { all: true }).then(data => {\n            if (data === null) return;\n\n            this.setState({ menu: data });\n        });\n    }\n\n    grade = grade => {\n        this.setState({ show: false });\n        service('/user/crosier/pathes', { grade: grade }).then(data => {\n            if (data === null) return;\n\n            this.setState({\n                show: true,\n                grade: grade,\n                pathes: data\n            });\n        });\n    }\n\n    check = e => {\n        this.setState({\n            pathes: e.checked\n        });\n    }\n\n    save = () => {\n        this.setState({ show: false }, () => service('/user/crosier/save', { grade: this.state.grade, pathes: this.state.pathes.join(',,') }).then(data => this.setState({ show: true })));\n    }\n\n    expands = () => {\n        let map = {};\n        for (let path of this.state.pathes) {\n            while (true) {\n                map[path] = true;\n                let index = path.lastIndexOf(';');\n                if (index === -1)\n                    break;\n\n                path = path.substring(0, index);\n            }\n        }\n\n        let expands = [];\n        for (let key in map) {\n            expands.push(key);\n        }\n\n        return expands;\n    }\n\n    render = () => {\n        let elements = [];\n        if (!this.state.grades || this.state.grades.length === 0) return elements;\n\n        elements.push(this.grades());\n        if (this.state.show && this.state.menu && this.state.menu.length > 0)\n            elements.push(<Tree key=\"menu\" checkable={true} selectable={false} showIcon={true} checkStrictly={true}\n                defaultExpandedKeys={this.expands()} defaultCheckedKeys={this.state.pathes} onCheck={this.check} treeData={this.nodes(this.state.menu, '')} />);\n        if (this.props.meta.toolbar && this.props.meta.toolbar.length > 0)\n            elements.push(<div key=\"toolbar\" className=\"console-crosier-toolbar\"><Button type=\"primary\" onClick={this.save}>保存</Button></div>);\n\n        return elements;\n    }\n\n    grades = () => {\n        let options = [];\n        for (let grade of this.state.grades) {\n            options.push(<Select.Option key={grade.grade} value={grade.grade}>{grade.name}</Select.Option>);\n        }\n\n        return <Select key=\"grades\" defaultValue={this.state.grade || 0} style={{ width: '100%' }} onChange={this.grade}>{options}</Select>;\n    }\n\n    nodes = (menus, parentKey) => {\n        let nodes = [];\n        if (!menus || menus.length === 0) return nodes;\n\n        let keys = {};\n        for (let menu of menus) {\n            let key = parentKey + (menu.service || menu.type || menu.label);\n            if (menu.parameter)\n                key += JSON.stringify(menu.parameter);\n            if (key in keys) continue;\n\n            keys[key] = true;\n            nodes.push({\n                key: key,\n                title: menu.label,\n                children: this.nodes(menu.items, key + ';')\n            });\n        }\n\n        return nodes;\n    }\n}\n\nexport default Crosier;","import React from 'react';\nimport './index.css';\n\nclass Page extends React.Component {\n    render = () => {\n        switch (this.props.page) {\n            default:\n                return <div className=\"no-page\">no page</div>;\n        }\n    }\n}\n\nexport default Page;","import React from 'react';\nimport { service } from '../http';\nimport meta from './meta';\nimport Dashboard from './dashboard';\nimport Grid from './grid';\nimport Form from './form';\nimport Setting from './setting';\nimport Crosier from './crosier';\nimport Page from '../page';\n\nclass Body {\n    setIndex = index => this.index = index;\n\n    uri = (uri, service) => {\n        if (!service) return uri;\n\n        if (service.startsWith('/')) return service;\n\n        return uri.substring(0, uri.lastIndexOf('/') + 1) + service;\n    }\n\n    load = (uri, parameter, data) => {\n        if (!uri.startsWith('/')) uri = uri.substring(uri.indexOf('.')).replace(/\\./g, '/');\n        if (uri === '/user/sign-out') {\n            service(uri).then(data => window.location.reload());\n\n            return;\n        }\n\n        if (uri === '/console/dashboard') {\n            this.setState(<Dashboard />);\n\n            return;\n        }\n\n        meta.get(uri).then(mt => {\n            if (mt === null) return;\n\n            let m = mt[uri.substring(uri.lastIndexOf('/') + 1)];\n            if (!m) return;\n\n            if (m.type === 'grid') {\n                this.setState(<Grid props={mt.props} meta={m} uri={uri} parameter={parameter} data={data} body={this} />);\n            } else if (m.type === 'form') {\n                this.setState(<Form props={mt.props} meta={m} uri={uri} parameter={parameter} data={data} body={this} />);\n            } else if (m.type === 'crosier') {\n                this.setState(<Crosier meta={m} />);\n            } else if (mt.key === 'setting') {\n                this.setState(<Setting props={mt.props} meta={m} uri={uri} parameter={parameter} data={data} body={this} />);\n            } else if (m.type === 'page') {\n                this.page(m.page, parameter, data);\n            }\n        });\n    }\n\n    page = (page, parameter, data) => this.setState(<Page page={page} parameter={parameter} data={data} body={this} />);\n\n    setState = state => this.index.setState({ body: <div /> }, () => this.index.setState({ body: state }));\n}\n\nconst body = new Body();\n\nexport default body;","import React from 'react';\nimport { Menu } from 'antd';\nimport { service } from '../http';\nimport body from './body';\n\nconst { SubMenu } = Menu;\n\nclass LeftMenu extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            items: []\n        };\n        this.map = {};\n        service('/console/menu').then(data => {\n            if (data === null || data.length === 0) return;\n\n            let item = data[0].service || data[0].page;\n            this.setState({\n                items: data,\n                item: item\n            }, () => this.load(item ? data[0] : data[0].items[0]));\n        });\n    }\n\n    click = e => {\n        this.load(this.map[e.key]);\n    };\n\n    load = item => {\n        if (item.service)\n            body.load(item.service, item.parameter, item.data);\n        else if (item.page)\n            body.page(item.page, item.parameter, item.data);\n    }\n\n    render = () => {\n        if (this.state.items.length === 0) return null;\n\n        return <Menu onClick={this.click} mode=\"inline\" theme=\"dark\" defaultOpenKeys={['0-0']} defaultSelectedKeys={[this.state.item ? '0-0' : '0-0-0']}>{this.menu(this.state.items, '0')}</Menu>;\n    }\n\n    menu = (items, parent) => {\n        let menus = [];\n        if (items.length === 0) return menus;\n\n        for (let i = 0; i < items.length; i++) {\n            let key = parent + '-' + i;\n            let item = items[i];\n            if (item.service || !item.items) {\n                this.map[key] = item;\n                menus.push(<Menu.Item key={key}>{item.label}</Menu.Item>);\n            }\n            else {\n                menus.push(<SubMenu key={key} title={<span>{item.label}</span>} >{this.menu(item.items, key)}</SubMenu>);\n            }\n        }\n\n        return menus;\n    };\n}\n\nexport default LeftMenu;","import React from 'react';\nimport { Spin, Dropdown, Menu, Avatar } from 'antd';\nimport { LockOutlined, UserOutlined, LogoutOutlined } from '@ant-design/icons';\nimport { post, url, loader } from '../http';\nimport './sign.css';\n\nclass Sign extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = { loading: false };\n        loader(this);\n    }\n\n    sign = () => {\n        this.props.body.load('/user/sign', {}, null);\n    }\n\n    password = () => {\n        this.props.body.load('/user/password', {}, {});\n    }\n\n    signOut = () => {\n        post('/user/sign-out').then(json => window.location.reload());\n    }\n\n    render = () => {\n        let nick = this.props.user.nick || 'Clivia UI';\n        let menu = <Menu>\n            <Menu.Item onClick={this.sign}>\n                <UserOutlined />\n                <span>个人信息</span>\n            </Menu.Item>\n            <Menu.Item onClick={this.password}>\n                <LockOutlined />\n                <span>修改密码</span>\n            </Menu.Item>\n            <Menu.Divider />\n            <Menu.Item onClick={this.signOut}>\n                <LogoutOutlined />\n                <span>退出</span>\n            </Menu.Item>\n        </Menu>;\n\n        return (\n            <div className=\"console-sign\">\n                <div className=\"console-sign-loading\"><Spin spinning={this.state.loading} /></div>\n                <Dropdown overlay={menu}>\n                    <div className=\"console-sign-avatar\">\n                        {this.props.user.avatar ? <Avatar src={url(this.props.user.avatar)} /> : <Avatar>{nick.substring(0, 1)}</Avatar>}\n                        <span>{nick}</span>\n                    </div>\n                </Dropdown>\n            </div>\n        );\n    }\n}\n\nexport default Sign;","import React from 'react';\nimport { Layout } from 'antd';\nimport { url } from '../http';\nimport Menu from './menu';\nimport Sign from './sign';\nimport body from './body';\nimport './index.css';\n\nclass Console extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      body: <div />\n    };\n    body.setIndex(this);\n  }\n\n  render = () => (\n    <Layout style={{ minHeight: '100vh' }}>\n      <Layout.Sider>\n        <div className=\"console-logo\">{this.props.logo ? [<img key=\"img\" src={url(this.props.logo)} alt=\"\" />, <div key=\"div\"></div>] : null}</div>\n        <div className=\"console-menu\"><Menu /></div>\n        <div className=\"console-copyright\">clivia-console &copy; {new Date().getFullYear()}</div>\n      </Layout.Sider>\n      <Layout>\n        <Layout.Header className=\"console-header\">\n          <Sign user={this.props.user} body={body} />\n        </Layout.Header>\n        <Layout.Content>\n          <div className=\"console-body\">{this.state.body}</div>\n        </Layout.Content>\n      </Layout>\n    </Layout>\n  );\n}\n\nexport default Console;","import React from 'react';\nimport { Layout, Form, Input, Radio, Button, message } from 'antd';\nimport { UserOutlined, LockOutlined, GithubOutlined, WechatOutlined, WeiboOutlined, AlipayOutlined } from '@ant-design/icons';\nimport { service } from '../http';\nimport { toArray } from '../json';\nimport './index.css';\n\nclass SignIn extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            up: false,\n            grades: []\n        };\n        service('/keyvalue/object', { key: 'setting.agreement.user.sign-up' }).then(data => {\n            if (data === null) return;\n\n            let array = toArray(data['setting.agreement.user.sign-up']);\n            if (array.length === 0) return;\n\n            let agreement = array[0];\n            agreement.label = agreement.name;\n            let index = agreement.name.lastIndexOf('.');\n            if (index > -1)\n                agreement.label = agreement.name.substring(0, index);\n            this.setState({ agreement: agreement });\n        });\n        service('/user/crosier/sign-up-grades').then(data => {\n            if (data === null || data.length <= 1)\n                return;\n\n            this.setState({ grades: data });\n        });\n    }\n\n    finish = values => {\n        if (this.state.up && values.repeat !== values.password) {\n            message.warn('重复密码与密码必须相同！');\n\n            return;\n        }\n\n        values.type = '';\n        service('/user/sign-' + (this.state.up ? 'up' : 'in'), values).then(data => {\n            if (data != null) {\n                window.location.reload();\n            }\n        });\n    };\n\n    change = () => {\n        this.setState({ up: !this.state.up });\n    }\n\n    render() {\n        return (\n            <Layout className=\"sign-in-layout\">\n                <Layout.Content>\n                    <div className=\"sign-in-header\">{document.title}</div>\n                    <div className=\"sign-in-form\">\n                        <Form onFinish={this.finish}>\n                            <Form.Item name=\"uid\"><Input prefix={<UserOutlined style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"用户名\" autoFocus={true} /></Form.Item>\n                            <Form.Item name=\"password\"><Input.Password prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"密码\" /></Form.Item>\n                            {this.state.up ? <Form.Item name=\"repeat\"><Input.Password prefix={<LockOutlined style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"重复密码\" /></Form.Item> : null}\n                            {this.state.up && this.state.grades.length > 0 ? <Form.Item label=\"我是\" name=\"grade\"><Radio.Group options={this.state.grades} optionType=\"button\" buttonStyle=\"solid\" /></Form.Item> : null}\n                            {this.state.up && this.state.agreement ? <Form.Item><a href={this.state.agreement.uri + '?filename=' + this.state.agreement.name} target=\"_blank\" rel=\"noopener noreferrer\">{this.state.agreement.label}</a></Form.Item> : null}\n                            <Form.Item><Button type=\"primary\" htmlType=\"submit\" className=\"sign-in-up-button\">{this.state.up ? '提交注册' : '登录'}</Button></Form.Item>\n                            {this.props.signUpEnable ? <Form.Item>\n                                <Button type=\"link\" className=\"sign-in-up-link\" onClick={this.change}>{this.state.up ? '使用已有账户登录' : '注册新账户'}</Button>\n                                <span>其他登录方式</span>\n                                <WechatOutlined className=\"sign-in-third\" />\n                                <AlipayOutlined className=\"sign-in-third\" />\n                                <WeiboOutlined className=\"sign-in-third\" />\n                                <GithubOutlined className=\"sign-in-third\" />\n                            </Form.Item> : null}\n                        </Form>\n                    </div>\n                </Layout.Content>\n                <Layout.Footer className=\"sign-in-footer\">clivia-console &copy; {new Date().getFullYear()}</Layout.Footer>\n            </Layout>\n        );\n    }\n}\n\nexport default SignIn;","import React from 'react';\nimport { ConfigProvider } from 'antd';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport { service, loader } from '../http';\nimport Console from '../console';\nimport SignIn from '../sign-in';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      logo: '',\n      signUpEnable: false,\n      user: {}\n    };\n    loader(null);\n  }\n\n  componentDidMount = () => {\n    service('/keyvalue/object', { key: 'setting.global.' }).then(data => {\n      if (data === null) return;\n\n      document.title = data['setting.global.console.title'] || 'Clivia Console';\n      this.setState({\n        logo: data['setting.global.console.logo'],\n        signUpEnable: data['setting.global.sign-up.enable'] === '1'\n      });\n    });\n    service('/user/sign').then(data => this.setState({ user: data }));\n  }\n\n  render = () => (\n    <ConfigProvider locale={zhCN}>\n      {this.state.user.id && this.state.user.id.length === 36 ? <Console logo={this.state.logo} user={this.state.user} /> : <SignIn logo={this.state.logo} signUpEnable={this.state.signUpEnable} />}\n    </ConfigProvider>\n  );\n}\n\nexport default Main;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Main from './main';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Main />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {\n    service\n} from \"../http\";\n\nclass Meta {\n    constructor() {\n        this.map = {};\n    }\n\n    get = uri => {\n        let key = uri.substring(0, uri.lastIndexOf('/') + 1);\n        if (key in this.map) {\n            return new Promise((resolve, reject) => {\n                resolve(this.map[key]);\n            });\n        }\n\n        return service('/console/meta', {\n            key: key\n        }).then(data => {\n            if (data != null) {\n                this.map[key] = data;\n            }\n\n            return data;\n        });\n    }\n\n    props = (full, sub) => {\n        if (!full) return sub;\n\n        if (!sub) return full;\n\n        let ps = [];\n        for (let s of sub) {\n            let fn = {}\n            for (let f of full) {\n                if (f.name === s.name) {\n                    fn = f;\n\n                    break;\n                }\n            }\n            ps.push({\n                ...fn,\n                ...s\n            });\n        }\n\n        return ps;\n    }\n}\n\nconst meta = new Meta();\n\nexport default meta;","const toMoney = (value, empty) => {\n    if (!value) return empty || '';\n\n    try {\n        return (parseInt(value) / 100).toFixed(2);\n    } catch (e) {\n        return '0.00';\n    }\n}\n\nconst fromMoney = value => {\n    if (!value) return 0;\n\n    try {\n        return Math.round(parseFloat(value) * 100) || 0;\n    } catch (e) {\n        return 0;\n    }\n}\n\nconst toPercent = value => {\n    if (!value) return '0.00 %';\n\n    try {\n        return (parseInt(value) / 100).toFixed(2) + ' %';\n    } catch (e) {\n        return '0.00 %';\n    }\n}\n\nconst fromPercent = value => {\n    if (!value) return 0;\n\n    try {\n        value = value.trim();\n        let length = value.length;\n        if (length > 1 && value.substring(length - 1) === '%')\n            value = value.substring(0, length - 1).trim();\n\n        return Math.round(parseFloat(value) * 100);\n    } catch (e) {\n        return 0;\n    }\n}\n\nconst toInt = (value, defaultValue) => {\n    if (!value) return defaultValue;\n\n    try {\n        return parseInt(value);\n    } catch (e) {\n        return defaultValue;\n    }\n}\n\nexport {\n    toMoney,\n    fromMoney,\n    toPercent,\n    fromPercent,\n    toInt\n};"],"sourceRoot":""}